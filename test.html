<!DOCTYPE html>
<html>
<head>
	<title>0.3js test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="reset.css" type="text/css">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="D3.js"></script>
    <script src="/ace-builds/src/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="test.js"></script>
</head>
<body onload="start()">
	<div id="entire">
		<div class="column">
			<pre id="editor">precision mediump float;
uniform float uf_time;
uniform vec2 uv2_resolution;
uniform sampler2D us2_frame;
varying vec2 vv2_v;

uniform float slide; //slide{"default": 0, "min": 0, "max": 1, "step": 0.01}
uniform vec4 color; //color{}

const float Da = 1.0;
const float Db = 0.1;
const float f = 0.055;
const float k = 0.062;
const float dt = 1.;

vec4 ddf(vec2 p) {
    vec2 d = vec2(1., 0.) / uv2_resolution;
    return -1. * texture2D(us2_frame, p)
        + .2 * (
            texture2D(us2_frame, p+d.xy)+texture2D(us2_frame, p+d.yx)+
            texture2D(us2_frame, p-d.xy)+texture2D(us2_frame, p-d.yx))
        + .05 * (
            texture2D(us2_frame, p-d.xy+d.yx)+texture2D(us2_frame, p+d.xx)+
            texture2D(us2_frame, p+d.xy-d.yx)+texture2D(us2_frame, p-d.xx));
}

void main() {
    vec2 p = gl_FragCoord.xy / uv2_resolution;
    vec4 vv = texture2D(us2_frame, p);
    vec4 dd = ddf(p);
    float A = vv.r + (Da * dd.r - vv.r * vv.g * vv.g + f * (1. - vv.r)) * dt;
    float B = vv.g + (Db * dd.g + vv.r * vv.g * vv.g - (k + f) * vv.g) * dt;
    if (mod(uf_time, 30.) &lt; 1.) {
        gl_FragColor = vec4(1., sin(length(p)*100.), 0., 1.);
        return;
    }
	gl_FragColor = vec4(A, B, 0.*sin(uf_time*8.), 1.);
}</pre><div id="controls"></div>
		</div><div class="column">
			<canvas id="glcanvas">No WebGL support :(</canvas>
		</div>
	</div>
</body>
</html>